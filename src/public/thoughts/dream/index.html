<!doctype html>
<html
  lang="zh-cn"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="false"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="zh-cn" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Hololens 2开发笔记01 - 环境配置 &middot; 首页</title>
  <meta name="title" content="Hololens 2开发笔记01 - 环境配置 &middot; 首页" />
  
  <meta name="description" content="本文为笔者从首次拿到设备开箱到配置开发环境，最后对项目进行打包部署到Hololens2真机的整个流程。" />
  <meta name="keywords" content="Hololens 2, VR, " />
  
  
  <link rel="canonical" href="//localhost:1313/thoughts/dream/" />
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.75efbde0b99ff286fae6f03226990076e6f98602b18d149b71f05e113f0fc7184122892266ac783102fe78fdbd53798b33201d9f3b7e00286104f2b671d240e7.css"
    integrity="sha512-de&#43;94Lmf8ob65vAyJpkAdub5hgKxjRSbcfBeET8PxxhBIokiZqx4MQL&#43;eP29U3mLMyAdnzt&#43;AChhBPK2cdJA5w==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.bbc8dde0b636dfba88adfae8e405171481feff60d739793c7fc554106ba10668f5b613319c1cc3cc1540ddd9c9729b4f5548e53a373eb28910851d353f35a39c.js"
    integrity="sha512-u8jd4LY237qIrfro5AUXFIH&#43;/2DXOXk8f8VUEGuhBmj1thMxnBzDzBVA3dnJcptPVUjlOjc&#43;sokQhR01PzWjnA==" data-copy="复制" data-copied="已复制"></script>
  
  
  
  <script src="/lib/zoom/zoom.min.f592a181a15d2a5b042daa7f746c3721acf9063f8b6acd175d989129865a37d400ae0e85b640f9ad42cd98d1f8ad30931718cf8811abdcc5fcb264400d1a2b0c.js" integrity="sha512-9ZKhgaFdKlsELap/dGw3Iaz5Bj&#43;Las0XXZiRKYZaN9QArg6FtkD5rULNmNH4rTCTFxjPiBGr3MX8smRADRorDA=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:url" content="//localhost:1313/thoughts/dream/">
  <meta property="og:site_name" content="首页">
  <meta property="og:title" content="Hololens 2开发笔记01 - 环境配置">
  <meta property="og:description" content="本文为笔者从首次拿到设备开箱到配置开发环境，最后对项目进行打包部署到Hololens2真机的整个流程。">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="thoughts">
    <meta property="article:published_time" content="2023-02-11T16:26:54+08:00">
    <meta property="article:modified_time" content="2025-08-02T19:04:57+08:00">
    <meta property="article:tag" content="Hololens 2">
    <meta property="article:tag" content="VR">
    <meta property="og:image" content="//localhost:1313/thoughts/dream/featured.jpg">

  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="//localhost:1313/thoughts/dream/featured.jpg">
  <meta name="twitter:title" content="Hololens 2开发笔记01 - 环境配置">
  <meta name="twitter:description" content="本文为笔者从首次拿到设备开箱到配置开发环境，最后对项目进行打包部署到Hololens2真机的整个流程。">

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "随笔",
    "name": "Hololens 2开发笔记01 - 环境配置",
    "headline": "Hololens 2开发笔记01 - 环境配置",
    "description": "本文为笔者从首次拿到设备开箱到配置开发环境，最后对项目进行打包部署到Hololens2真机的整个流程。",
    
    "inLanguage": "zh-cn",
    "url" : "\/\/localhost:1313\/thoughts\/dream\/",
    "author" : {
      "@type": "Person",
      "name": " "
    },
    "copyrightYear": "2023",
    "dateCreated": "2023-02-11T16:26:54\u002b08:00",
    "datePublished": "2023-02-11T16:26:54\u002b08:00",
    
    "dateModified": "2025-08-02T19:04:57\u002b08:00",
    
    "keywords": ["Hololens 2","VR"],
    
    "mainEntityOfPage": "true",
    "wordCount": "353"
  }]
  </script>


  
  
  <meta name="author" content=" " />
  
  
  
  
  <link href="https://github.com/bin549" rel="me" />
  
  
  
  
  <link href="https://bin549.itch.io" rel="me" />
  
  
  
  
  <link href="https://learn.stem-powered.com/course/creator?id=11" rel="me" />
  
  
  
  
  <link href="https://afdian.com/a/bin549" rel="me" />
  
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>






















  
  




  
  
  
  
  <meta name="theme-color"/>
  
  

  
  
</head>
<body
    class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content"
        ><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>跳过正文</a
      >
    </div>
    
    
      <div class="min-h-[148px]"></div>
<div
  class="fixed inset-x-0 min-h-[130px] opacity-65 pl-[24px] pr-[24px] bg-gradient-to-b from-neutral from-60% dark:from-neutral-800 to-transparent mix-blend-normal z-index-80"></div>
<div class="fixed inset-x-0 pl-[24px] pr-[24px] z-index-100">
  <div
    id="menu-blur"
    class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div>
  <div class="relative max-w-[64rem] ml-auto mr-auto">
    <div class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3 padding-main-menu">
    
    
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">首页</a>
            

        </nav>
        <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">

            
            
            
  <a
  href="/thoughts/"
  
  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
  
    <span class="mr-1">
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M368 128C368 172.4 342.6 211.5 304 234.4V256C304 273.7 289.7 288 272 288H176C158.3 288 144 273.7 144 256V234.4C105.4 211.5 80 172.4 80 128C80 57.31 144.5 0 224 0C303.5 0 368 57.31 368 128V128zM168 176C185.7 176 200 161.7 200 144C200 126.3 185.7 112 168 112C150.3 112 136 126.3 136 144C136 161.7 150.3 176 168 176zM280 112C262.3 112 248 126.3 248 144C248 161.7 262.3 176 280 176C297.7 176 312 161.7 312 144C312 126.3 297.7 112 280 112zM3.379 273.7C11.28 257.9 30.5 251.5 46.31 259.4L224 348.2L401.7 259.4C417.5 251.5 436.7 257.9 444.6 273.7C452.5 289.5 446.1 308.7 430.3 316.6L295.6 384L430.3 451.4C446.1 459.3 452.5 478.5 444.6 494.3C436.7 510.1 417.5 516.5 401.7 508.6L224 419.8L46.31 508.6C30.5 516.5 11.28 510.1 3.379 494.3C-4.525 478.5 1.882 459.3 17.69 451.4L152.4 384L17.69 316.6C1.882 308.7-4.525 289.5 3.379 273.7V273.7z"/></svg>

  </span>


    </span>
  
  <p class="text-base font-medium" title="随笔">
    随笔
  </p>
</a>



            
            
  <a
  href="/murmur/"
  
  class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
  
    <span class="mr-1">
      

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
<path fill="currentColor" d="M50.8 452.1L19.2 477.4c-2.1 1.7-4.7 2.6-7.4 2.6C5.3 480 0 474.7 0 468.2V192C0 86 86 0 192 0S384 86 384 192V468.2c0 6.5-5.3 11.8-11.8 11.8c-2.7 0-5.3-.9-7.4-2.6l-31.6-25.3c-3.3-2.7-7.5-4.1-11.8-4.1c-5.9 0-11.5 2.8-15 7.5l-37.6 50.1c-3 4-7.8 6.4-12.8 6.4s-9.8-2.4-12.8-6.4l-38.4-51.2c-3-4-7.8-6.4-12.8-6.4s-9.8 2.4-12.8 6.4l-38.4 51.2c-3 4-7.8 6.4-12.8 6.4s-9.8-2.4-12.8-6.4L77.6 455.5c-3.6-4.7-9.1-7.5-15-7.5c-4.3 0-8.4 1.5-11.7 4.1zM160 192c0-17.7-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32zm96 32c17.7 0 32-14.3 32-32s-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32z"/></svg>
  </span>


    </span>
  
  <p class="text-base font-medium" title="碎碎念">
    碎碎念
  </p>
</a>



            
            

            


            
            <button id="search-button" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            


            
            
            <div
                class=" flex items-center">
                <button id="appearance-switcher" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400">
                    <div class="flex items-center justify-center dark:hidden">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                    </div>
                    <div class="items-center justify-center hidden dark:flex">
                        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                    </div>
                </button>
            </div>
            

        </nav>
        <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">

            <span></span>

            


            
            <button id="search-button-mobile" aria-label="Search" class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                title="">
                

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


            </button>
            

            
            
            <button id="appearance-switcher-mobile" aria-label="Dark mode switcher" type="button" class="text-base hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-1 rtl:ml-1">
                <div class="flex items-center justify-center dark:hidden">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>

  </span>


                </div>
                <div class="items-center justify-center hidden dark:flex">
                    

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>

  </span>


                </div>
            </button>
            

        </div>
    </div>
    <div class="-my-2 md:hidden">

        <label id="menu-button" class="block">
            
            <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
                

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>

  </span>


            </div>
            <div id="menu-wrapper" class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 padding-top-[5px]">
                <ul
                    class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl">

                    <li id="menu-close-button">
                        <span
                            class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>

</span>
                    </li>

                    

                    
  <li class="mt-1">
  <a
    href="/thoughts/"
    
    class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
      <div class="mr-2">
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M368 128C368 172.4 342.6 211.5 304 234.4V256C304 273.7 289.7 288 272 288H176C158.3 288 144 273.7 144 256V234.4C105.4 211.5 80 172.4 80 128C80 57.31 144.5 0 224 0C303.5 0 368 57.31 368 128V128zM168 176C185.7 176 200 161.7 200 144C200 126.3 185.7 112 168 112C150.3 112 136 126.3 136 144C136 161.7 150.3 176 168 176zM280 112C262.3 112 248 126.3 248 144C248 161.7 262.3 176 280 176C297.7 176 312 161.7 312 144C312 126.3 297.7 112 280 112zM3.379 273.7C11.28 257.9 30.5 251.5 46.31 259.4L224 348.2L401.7 259.4C417.5 251.5 436.7 257.9 444.6 273.7C452.5 289.5 446.1 308.7 430.3 316.6L295.6 384L430.3 451.4C446.1 459.3 452.5 478.5 444.6 494.3C436.7 510.1 417.5 516.5 401.7 508.6L224 419.8L46.31 508.6C30.5 516.5 11.28 510.1 3.379 494.3C-4.525 478.5 1.882 459.3 17.69 451.4L152.4 384L17.69 316.6C1.882 308.7-4.525 289.5 3.379 273.7V273.7z"/></svg>

  </span>


      </div>
    
    <p class="text-bg font-bg" title="随笔">
      随笔
    </p>
  </a>
</li>




                    

                    
  <li class="mt-1">
  <a
    href="/murmur/"
    
    class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400">
    
      <div class="mr-2">
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
<path fill="currentColor" d="M50.8 452.1L19.2 477.4c-2.1 1.7-4.7 2.6-7.4 2.6C5.3 480 0 474.7 0 468.2V192C0 86 86 0 192 0S384 86 384 192V468.2c0 6.5-5.3 11.8-11.8 11.8c-2.7 0-5.3-.9-7.4-2.6l-31.6-25.3c-3.3-2.7-7.5-4.1-11.8-4.1c-5.9 0-11.5 2.8-15 7.5l-37.6 50.1c-3 4-7.8 6.4-12.8 6.4s-9.8-2.4-12.8-6.4l-38.4-51.2c-3-4-7.8-6.4-12.8-6.4s-9.8 2.4-12.8 6.4l-38.4 51.2c-3 4-7.8 6.4-12.8 6.4s-9.8-2.4-12.8-6.4L77.6 455.5c-3.6-4.7-9.1-7.5-15-7.5c-4.3 0-8.4 1.5-11.7 4.1zM160 192c0-17.7-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32zm96 32c17.7 0 32-14.3 32-32s-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32z"/></svg>
  </span>


      </div>
    
    <p class="text-bg font-bg" title="碎碎念">
      碎碎念
    </p>
  </a>
</li>




                    

                </ul>
                
                

            </div>
        </label>
    </div>
</div>





  </div>
</div>


<script
  type="text/javascript"
  src="/js/background-blur.min.4812321520cc2e4cd52bf9137015a55bb6c0b5e66a6b2c96b8654c0ec99be59e8e6425dd838a6fd9bac54000586f37f4a9680bbefaa2aee4601a69e188005cf6.js"
  integrity="sha512-SBIyFSDMLkzVK/kTcBWlW7bAteZqayyWuGVMDsmb5Z6OZCXdg4pv2brFQABYbzf0qWgLvvqiruRgGmnhiABc9g=="
  data-target-id="menu-blur"></script>

    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  


  <article>
    
      
      
      
      
        




    
    <div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom"
    style="background-image:url(/thoughts/dream/featured_hu_3fdf0945cb8abf73.jpg);">
    


    <div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal">
    </div>
    <div
        class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal">
    </div>
</div>

<div id="background-blur" class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div>


<script type="text/javascript" src="/js/background-blur.min.4812321520cc2e4cd52bf9137015a55bb6c0b5e66a6b2c96b8654c0ec99be59e8e6425dd838a6fd9bac54000586f37f4a9680bbefaa2aee4601a69e188005cf6.js" integrity="sha512-SBIyFSDMLkzVK/kTcBWlW7bAteZqayyWuGVMDsmb5Z6OZCXdg4pv2brFQABYbzf0qWgLvvqiruRgGmnhiABc9g==" data-target-id="background-blur"></script>

      
    


    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Hololens 2开发笔记01 - 环境配置
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  

  
  
    
  

  
    
  

  
    
  

  
    
  

  
    
  

  

  

  

  

  
    
  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2023-02-11T16:26:54&#43;08:00">2023-02-11</time><span class="px-2 text-primary-500">&middot;</span><time datetime="2025-08-02T19:04:57&#43;08:00">更新于: 2025-08-02</time><span class="px-2 text-primary-500">&middot;</span><span>353 字</span><span class="px-2 text-primary-500">&middot;</span><span title="预计阅读">2 分钟</span><span class="px-2 text-primary-500">&middot;</span>



<script
  type="text/javascript"
  src="/js/zen-mode.min.2a0a1375509c03daf41c53a9831aa2d560895b7a2528c3eb3b56e7b11a135c7529e49727162a053b6193be8340270a8342f42c69f3d7e262ae54bc248eaac8f5.js"
  integrity="sha512-KgoTdVCcA9r0HFOpgxqi1WCJW3olKMPrO1bnsRoTXHUp5JcnFioFO2GTvoNAJwqDQvQsafPX4mKuVLwkjqrI9Q=="></script>

<span class="mb-[2px]">
  <span
    id="zen-mode-button"
    class="text-lg hover:text-primary-500"
    title=""
    data-title-i18n-disable=""
    data-title-i18n-enable="">
    <span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="50px" height="50px">
    <path fill="currentColor" d="M 12.980469 4 C 9.1204688 4 5.9804688 7.14 5.9804688 11 L 6 26 L 9.9804688 26 L 9.9804688 11 C 9.9804688 9.35 11.320469 8 12.980469 8 L 40.019531 8 C 41.679531 8 43.019531 9.35 43.019531 11 L 43.019531 39 C 43.019531 40.65 41.679531 42 40.019531 42 L 29 42 C 29 43.54 28.420938 44.94 27.460938 46 L 40.019531 46 C 43.879531 46 47.019531 42.86 47.019531 39 L 47.019531 11 C 47.019531 7.14 43.879531 4 40.019531 4 L 12.980469 4 z M 7 28 C 4.794 28 3 29.794 3 32 L 3 42 C 3 44.206 4.794 46 7 46 L 23 46 C 25.206 46 27 44.206 27 42 L 27 32 C 27 29.794 25.206 28 23 28 L 7 28 z M 7 32 L 23 32 L 23.001953 42 L 7 42 L 7 32 z"/>
</svg>
  </span>

</span>
  </span>
</span>

    

    
    
  </div>

  
    <div class="flex flex-row flex-wrap items-center">
      
        
          
        
      
        
      
        
      
        
      
        
      
    </div>
  

  
  
    <div class="flex flex-row flex-wrap items-center">
      
        
      
        
          
            
              <span
                class="mr-2 margin-top-[0.5rem]"
                onclick="window.open(&#34;/categories/%E6%83%B3%E6%B3%95/&#34;,'_self');return false;">
                <span class="flex cursor-pointer">
  <span
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    想法
  </span>
</span>

              </span>
            
          
        
      
        
      
        
          
            
              <span
                class="mr-2 margin-top-[0.5rem]"
                onclick="window.open(&#34;/tags/hololens-2/&#34;,'_self');return false;">
                <span class="flex cursor-pointer">
  <span
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    Hololens 2
  </span>
</span>

              </span>
            
              <span
                class="mr-2 margin-top-[0.5rem]"
                onclick="window.open(&#34;/tags/vr/&#34;,'_self');return false;">
                <span class="flex cursor-pointer">
  <span
    class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    VR
  </span>
</span>

              </span>
            
          
        
      
        
          
        
      
    </div>
  

  
  



      </div>

      
      
      
      
      

      

      

        
          
          
<div class="flex author">
  
    
    
      
    
    
      
        
      
      <img
        class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4"
        width="96"
        height="96"
        alt=" "
        src="/img/avatar_hu_751ea4deee93581e.png">
    
  
  <div class="place-self-center">
    
    
      <div class="text-sm text-neutral-700 dark:text-neutral-400">反者道之动</div>
    
    <div class="text-2xl sm:text-lg">
  <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://github.com/bin549"
          target="_blank"
          aria-label="Github"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://bin549.itch.io"
          target="_blank"
          aria-label="Itch-Io"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" height="235.452" width="261.728" viewBox="0 0 245.37069 220.73612"><path fill="currentColor" d="M31.99 1.365C21.287 7.72.2 31.945 0 38.298v10.516C0 62.144 12.46 73.86 23.773 73.86c13.584 0 24.902-11.258 24.903-24.62 0 13.362 10.93 24.62 24.515 24.62 13.586 0 24.165-11.258 24.165-24.62 0 13.362 11.622 24.62 25.207 24.62h.246c13.586 0 25.208-11.258 25.208-24.62 0 13.362 10.58 24.62 24.164 24.62 13.585 0 24.515-11.258 24.515-24.62 0 13.362 11.32 24.62 24.903 24.62 11.313 0 23.773-11.714 23.773-25.046V38.298c-.2-6.354-21.287-30.58-31.988-36.933C180.118.197 157.056-.005 122.685 0c-34.37.003-81.228.54-90.697 1.365zm65.194 66.217a28.025 28.025 0 0 1-4.78 6.155c-5.128 5.014-12.157 8.122-19.906 8.122a28.482 28.482 0 0 1-19.948-8.126c-1.858-1.82-3.27-3.766-4.563-6.032l-.006.004c-1.292 2.27-3.092 4.215-4.954 6.037a28.5 28.5 0 0 1-19.948 8.12c-.934 0-1.906-.258-2.692-.528-1.092 11.372-1.553 22.24-1.716 30.164l-.002.045c-.02 4.024-.04 7.333-.06 11.93.21 23.86-2.363 77.334 10.52 90.473 19.964 4.655 56.7 6.775 93.555 6.788h.006c36.854-.013 73.59-2.133 93.554-6.788 12.883-13.14 10.31-66.614 10.52-90.474-.022-4.596-.04-7.905-.06-11.93l-.003-.045c-.162-7.926-.623-18.793-1.715-30.165-.786.27-1.757.528-2.692.528a28.5 28.5 0 0 1-19.948-8.12c-1.862-1.822-3.662-3.766-4.955-6.037l-.006-.004c-1.294 2.266-2.705 4.213-4.563 6.032a28.48 28.48 0 0 1-19.947 8.125c-7.748 0-14.778-3.11-19.906-8.123a28.025 28.025 0 0 1-4.78-6.155 27.99 27.99 0 0 1-4.736 6.155 28.49 28.49 0 0 1-19.95 8.124c-.27 0-.54-.012-.81-.02h-.007c-.27.008-.54.02-.813.02a28.49 28.49 0 0 1-19.95-8.123 27.992 27.992 0 0 1-4.736-6.155zm-20.486 26.49l-.002.01h.015c8.113.017 15.32 0 24.25 9.746 7.028-.737 14.372-1.105 21.722-1.094h.006c7.35-.01 14.694.357 21.723 1.094 8.93-9.747 16.137-9.73 24.25-9.746h.014l-.002-.01c3.833 0 19.166 0 29.85 30.007L210 165.244c8.504 30.624-2.723 31.373-16.727 31.4-20.768-.773-32.267-15.855-32.267-30.935-11.496 1.884-24.907 2.826-38.318 2.827h-.006c-13.412 0-26.823-.943-38.318-2.827 0 15.08-11.5 30.162-32.267 30.935-14.004-.027-25.23-.775-16.726-31.4L46.85 124.08c10.684-30.007 26.017-30.007 29.85-30.007zm45.985 23.582v.006c-.02.02-21.863 20.08-25.79 27.215l14.304-.573v12.474c0 .584 5.74.346 11.486.08h.006c5.744.266 11.485.504 11.485-.08v-12.474l14.304.573c-3.928-7.135-25.79-27.215-25.79-27.215v-.006l-.003.002z"/></svg>
  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://learn.stem-powered.com/course/creator?id=11"
          target="_blank"
          aria-label="Spotify"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8zm100.7 364.9c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4zm26.9-65.6c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm31-76.2c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3z"/></svg>
  </span>

</span></a
        >
      
    
      
        <a
          class="px-1 hover:text-primary-700 dark:hover:text-primary-400"
          href="https://afdian.com/a/bin549"
          target="_blank"
          aria-label="Ko-Fi"
          rel="me noopener noreferrer"
          ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->
<svg width="211.67mm" height="211.67mm" version="1.1" viewBox="0 0 211.67 211.67" xmlns="http://www.w3.org/2000/svg">
 <defs>
  <clipPath id="clipPath25">
   <path d="m0 600h1654.8v-600h-1654.8z" fill="currentColor"/>
  </clipPath>
 </defs>
 <g transform="translate(-3.0786 -29.59)">
  <g transform="matrix(.35278 0 0 -.35278 3.0785 241.26)">
   <g clip-path="url(#clipPath25)">
    <g transform="translate(600 300)">
     <path d="m-300 300c-165.69 0-300-134.31-300-300 0-165.69 134.31-300 300-300 165.68 0 300 134.31 300 300 0 165.69-134.32 300-300 300zm-188.93-166.99h329.58c23.223 0 46.032-6.8325 65.073-20.125 18.412-12.856 36.378-33.646 42.697-67.02 14.674-77.514-43.568-135.76-126.12-131.18 0.438-21.268-3.8105-59.422-44.878-69.696-3.282-0.821-6.6604-1.186-10.044-1.207-72.13-0.448-222.53-0.88916-222.53-0.88916s-46.066-0.01555-49.176 45.962c-1.023 77.88-0.48339 223.69-0.48339 223.69s-0.02651 2.9267-0.02051 3.6577c0.043 5.607 4.4359 16.8 15.901 16.8zm312.71-55.573v-107.8s14.302-1.6507 31.907 0.54932c20.356 6.6 39.06 20.901 39.06 57.199 0 14.85-5.2614 25.601-11.837 33.239-9.341 10.848-23.152 16.809-37.469 16.809h-21.661z" fill="currentColor"/>
    </g>
    <g transform="translate(256.61 203.37)">
     <path d="m0 0c3.585-1.806 5.876 0.437 5.876 0.437s52.457 47.878 76.089 75.452c21.018 24.667 22.389 66.234-13.708 81.766-36.096 15.532-65.795-18.272-65.795-18.272-25.755 28.326-64.734 26.891-82.763 7.721-18.027-19.169-11.732-52.072 1.717-70.383 12.626-17.19 68.119-66.65 76.529-75.015 0 0 0.614-0.641 2.055-1.706" fill="currentColor"/>
    </g>
   </g>
  </g>
 </g>
</svg>

  </span>

</span></a
        >
      
    
  </div>

</div>
  </div>
</div>

        

        

        
          <div class="mb-5"></div>
        

      

    </header>

    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      


      <div class="min-w-0 min-h-0 max-w-fit">
        



        <div class="article-content max-w-prose mb-20">
          <div class="lead text-neutral-500 dark:text-neutral-400 !mb-9 text-xl">
  本文为笔者从首次拿到设备开箱到配置开发环境，最后对项目进行打包部署到Hololens2真机的整个流程。
</div>

<p>本文为笔者从首次拿到设备开箱到配置开发环境，最后对项目进行打包部署到Hololens2真机的整个流程。</p>
<p>微软的官方文档中有HoloLens2部署的权威教程。但一些问题官方文档并没有列出，需要在实际开发过程中去根据自身或者前人的经验去解决。</p>
<p>开发环境使用Unity2020.3.8+ MRTK2.7.0。MRTK2.7 已在2021年9月份开始支持Unity2020.3LTS版本，通常而言，Unity2019.4+MRTK2.6 或者 Unity2020.3+MRTK2.7是最佳搭配，不建议混合搭配（如Unity2019.4+MRTK2.7）。</p>
<p>一、开发环境搭建</p>
<p>1.1Unity配置</p>
<p>Unity是开发 HoloLens 应用的重点平台，而微软和 Unity 本身也是紧密合作，双向支持。</p>
<p>1.1.1新建Unity项目</p>
<p>通过Unity Hub，新建一个工程，选择3D模板、填写好项目名称、选择工程存储路径。</p>
<p>1.1.2 配置Unity编译环境</p>
<p>工程创建完成后，在Unity菜单中，依次选择File&gt; Build Settings（或者使用快捷键Ctrl+Shift+B），打开构建设置窗口，选择“Universal Windows Platform”，然后单击Switch Platform按钮切换工作平台到UWP平台（Universal Windows Platform，通用Windows平台），设置Target Device属性为HoloLens、Architecture属性为ARM64，最后点击「Switch Platform」按钮。</p>
<p>注意：如果在Build Settings弹窗选择中无法选择Universal Windows Platform模块，则需要回到Unity Hub中添加相关Unity 编辑器版本的UWP 构建支持模块。</p>
<p>1.2 导入MRTK插件</p>
<p>MRTK 是微软 Mixed Reality Toolkit 的简称。这个用于 Unity 的工具包提供跨平台的输入系统、基础组件以及用于空间交互的通用构建模块，目标就是加快面向包括 HoloLens 在内的应用程序的开发，大大降低 MR 准入门槛。</p>
<p>1.2.1 导入的方式</p>
<p>在Unity项目中导入MRTK的方式有两种。</p>
<p>第一种是在官方提供的github网址(<a
  href="https://github.com/microsoft/MixedRealityToolkit-Unity/releases"
    target="_blank"
  >https://github.com/microsoft/MixedRealityToolkit-Unity/releases</a>
)中下载到.unitypackage包，跟导入其他unity资源包的方式一样。第二种是通过MRFT工具（Mixed Reality Feature Tool）导入，该工具以可视化的方式管理MRTK工具包，可以大大简化MRTK工具包的管理。本文将通过第二种方式来导入MRTK。</p>
<p>1.2.2 使用MRFT导入MRTK</p>
<p>在微软官方（https://www.microsoft.com/en-us/download/details.aspx?id=102778）直接下载MRFT工具。</p>
<p>下载完MRFT后打开，然后就可以使用该工具程序导入MRTK工具包，首先指定要进行处理的Unity工程路径，然后选择好相应的工具包即可完成操作。</p>
<p>在Mixed Reality Toolkit下拉框选中Mixed Reality Toolkit Foundation并指定版本即选中要导入的MRTK包。</p>
<p>除此之外，还应该添加Open XR插件，OpenXR 插件可以为 AR/VR 技术提供支持，而 Unity OpenXR 插件可以为 Unity 开发环境提供 OpenXR 支持。在Platform Support下拉框中勾选Mixed Reality OpenXR Plugin并指定版本即可。</p>
<p>MRFT是一个独立的工具程序，其实质也是通过修改manifest.json文件引导Unity加载MRTK相应工具包，在选好需要导入的配置后，选中导入后，返回到Unity编辑器时，Unity会自动检测和加载对应的工具包。</p>
<p>1.2.3 配置XR环境</p>
<p>步骤1在项目配置窗口的XR 管线设置中启用Unity OpenXR 插件。</p>
<p>步骤2 导入相关插件之后，由于项目使用的新的输入管理器，Untiy编辑器在导入OpenXR工具包后要求重启，在警告弹窗中选中确定。</p>
<p>步骤3 在新弹出的项目配置页面点击Show XR Plug-in Management Settings。</p>
<p>为 XR SDK 管线设定了它作为提供支持的插件，选中XR Plug-in Management后，依次打开 XR Plug-in Management -&gt; UWP -&gt; OpenXR，勾选 Microsoft HoloLens feature group前的多选框。</p>
<p>在Player的在Public Setting 里面一栏中，可配置项目打包后的名字，把Package name 修改成你需要打包文件的名字。然后再Capabilitles选项卡中，打开InternetClient，InternetClientServer，WebCam，Microphone，SpatialPerception 五个功能卡，分别负责网络功能，摄像头，麦克风，以及场景扫描。最后在Supported Device Families中打开Holographic选项。</p>
<p>在OpenXR配置界面中，出于减少渲染开销，提高渲染效率的考虑。Render Mode 设置为 Single Pass Instance，Depth Submission Mode 设置为 Depth 16 Bit。以及为项目添加“Microsoft Hand Interaction Profile”配置文件（为了演示文章后面手势交互的简单Demo）。</p>
<p>XR Plug-in Managerment配置好相应选择中在新页面选中应用设置即可。</p>
<p>1.2.4 完成配置XR环境</p>
<p>最后导入TextMeshPro文字渲染工具包然后选择下一步再选中完成环境配置。</p>
<p>二、设备环境</p>
<p>2.1 启动开发者模式</p>
<p>为确保开发计算机与HoloLens2设备正常连接，开发计算机与HoloLens2设备均需开启“开发人员选项”。</p>
<p>在开发计算机中打开控制面板，依次选择“更新和安全&gt; 开发者选项”，打开“开发人员模式”；</p>
<p>在HoloLens2设备中，打开Settings面板，依次选择Update &amp; Security &gt; For Developers，打开“Developer Mode”。</p>
<p>2.2网页连接Hololens 2设备</p>
<p>Hololens 2可以通过浏览器来访问设备的状态或者实现投屏效果。</p>
<p>步骤1、找到需要在浏览器中输入的UsbNcm IP</p>
<p>方式一 使用 USB-C 线缆将 HoloLens 2 连接到电脑，在开发者面板找到UsbNcm IP。</p>
<p>方式二 在命令提示符，切换路径到安装了 Windows 10 SDK 的 bin<SDK version>\x86 文件夹，如 C:\Program Files (x86)\Windows Kits\10\bin\10.0.19041.0\x86。然后输入”winappdeploycmd device”后回车，在输出中找到显示 HoloLens 设备名称的条目，如 HOLOLENS-xxxxxx。</p>
<p>步骤2 创建新用户</p>
<p>在浏览器中输入UsbNcm IP，如果是首次，页面需要你想设备请求一个pin码，并给出步骤要求你安装要求的证书并重启浏览器。证书安装后输入设备中显示的pin码以及新用户的账号密码就能注册成功。</p>
<p>步骤3 查看设备状态</p>
<p>注册登录成功后就能进入Device Portal 页面，查看例如设备门户主页，3D 视图，性能，投影等页面。</p>
<p>三、MR 场景实现和本机调试</p>
<p>3.1创建MR场景</p>
<p>通过 Project Configurator 完成项目配置后，新建一个空场景，并在Unity 主菜单选中Mixed Realiity &gt; Toolkit &gt; Add to Scene and Configure，此时在 Hierarchy 中会自动生成 MixedRealityToolkit、MixedRealityPlayspace 和 Mixed RealitySceneContent，Main Camera 也会有所调整。</p>
<p>MixedRealityToolkit 则会管理整个 MR 应用中的各种系统和功能（通过各种配置文件），它挂载了 MixedRealityToolkit 组件，用于实现诸如输入、交互、菜单和导航等功能。</p>
<p>MixedRealityPlayspace 代表用户进行 MR 交互的物理空间，我们需要它来确定摆放虚拟物体的位置和朝向，以及跟踪用户的移动和方向。 Main Camera 作为其子项，当 MixedRealityPlayspace 更新用户实时位置时，摄像机也能跟随用户视角正确显示虚拟物体。</p>
<p>MixedRealitySceneContent 用于管理 MR 场景内容，比如在运行时加载和卸载场景，更好地节省内存和算力。</p>
<p>此时，如果运行场景，将能默认再场景中看到一个调试板（MRTK 自动提供的 Visual Profile（可视化分析器）），它来自 MRTK 的诊断系统（Diagnostics System），而诊断系统就是上面提到过的 MixedRealityToolkit 对象管理的系统之一。</p>
<p>3.2创建物体并实现手势交互</p>
<p>在游戏场景中新建3D物体Cube，调整位置到摄像机面前，并为其添加手势控制所需要MRTK提供的相应脚本Object Manipulator, NearInteractionGrabbable。</p>
<p>运行程序，此时就可以对场景中刚添加并绑定了相应脚本的Cube进行手势的交互了。</p>
<p>3.3本机调试</p>
<p>为了加快程序开发的迭代速度，Unity引擎支持直接在运行的时候查看效果，而非需要每次编译部署到设备，实现的方式有两种，通过USB连接和Wifi连接。</p>
<p>3.3.1 使用USB进行调试</p>
<p>使用 USB-C 线缆将 HoloLens 2 连接到电脑，确保Unity引擎能识别到设备即可。</p>
<p>3.3.2 使用Wifi连接</p>
<p>MRTK 提供了 Remoting 的调试功能：Holographic Remoting for Play Mode，直接在 Unity 运行项目就能在戴着的 HoloLens 2 设备上体验应用。确保开发机和Hololens 2连接在同一个网络，在设置中的开发者菜单栏中可找到需要的需要连接的IP地址。</p>
<p>在Unity 主菜单 Mixed Reality &gt; Remoting，会打开 Holographic Remoting for Play Mode 窗口，在 Remote Host Name 中输入刚才记录的 IP 地址，并点击「Enable Hologrpahic Remoting for Play Mode」，这里会出现一个警告，直接点击「Fix 按钮」，运行场景后即可。</p>
<p>四、项目打包部署</p>
<p>将Unity的MR程序打包部署到Hololens 2的方式有多种，直接在Unity的Build Settings中打包或者先编译再通过VS部署到设备，官方推荐后者，以及可以通过USB和Wifi进行部署，接下来演示的是通过VS环境WiFi部署方式。4.1Unity编译程序</p>
<p>再Build Settings窗口将项目打包到本地指定的文件夹。</p>
<p>4.2VS环境WiFi部署到设备</p>
<p>使用WiFi部署的前提是确保开发计算机与HoloLens2设备处于同一局域网。</p>
<p>使用VS打开编译出的项目，如果缺失相关包软件会提示你安装上，需要根据提示安装上相关工具包。</p>
<p>在VS的设置栏中，选择Release（发布）、ARM64、远程计算机。</p>
<p>然后在VS菜单中，依次选择“配置属性&gt; 调试”，在调试面板中“计算机名”属性栏中填写HoloLens2设备的IP地址（跟wifi连接相关的地址一致，在HoloLens2中，依次选择Settings &gt; Network &amp; Internet &gt; Advanced Options，可以看到HoloLens2设备当前的IP地址）、设置“身份验证类型”为通用（未加密的协议）。</p>
<p>在VS菜单中，依次选择“调试&gt; 开始调试”（或者使用快捷键F5）启动生成和部署，如果是第一次部署VS会有一个弹窗要求你输入一个Pin值，该Pin值能在Hololens 2的开发者面板里面找到。</p>
<p>输入后等待部署完成后即可在Hololens 2找到刚部署上去的程序。</p>
<p>参考文章：</p>
<p>使用 Windows 设备门户</p>
<p><a
  href="https://learn.microsoft.com/zh-cn/windows/mixed-reality/develop/advanced-concepts/using-the-windows-device-portal"
    target="_blank"
  >https://learn.microsoft.com/zh-cn/windows/mixed-reality/develop/advanced-concepts/using-the-windows-device-portal</a>
</p>
<p>Unity X HoloLens 2 混合现实开发入门</p>
<p><a
  href="https://learn.u3d.cn/tutorial/mr-development-hololens2"
    target="_blank"
  >https://learn.u3d.cn/tutorial/mr-development-hololens2</a>
</p>
<p>HoloLens2之路－Unity2020.3+MRTK2.7配置</p>
<p><a
  href="https://blog.csdn.net/yolon3000/article/details/121776416?spm=1001.2014.3001.5501"
    target="_blank"
  >https://blog.csdn.net/yolon3000/article/details/121776416?spm=1001.2014.3001.5501</a>
</p>
<p>HoloLens2之路－部署到真机</p>
<p><a
  href="https://blog.csdn.net/yolon3000/article/details/122072266"
    target="_blank"
  >https://blog.csdn.net/yolon3000/article/details/122072266</a>
</p>
<hr>
<p><strong>结论</strong></p>
<p>本文详细介绍了从开发环境搭建到项目部署的完整流程，为 Hololens 2 开发提供了实用的指导。</p>
<p><strong>摘要:</strong>
本文为笔者从首次拿到设备开箱到配置开发环境，最后对项目进行打包部署到Hololens2真机的整个流程。</p>
<hr>

          
          
          
        </div>

        

        

        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.407e5b2727c1f241c95d53db24c776bea71bfc18e09511b815d669ad8caca6e9e18a53864ad364b1ccccfa2f2956768d33cfe193bfb64d3406f3b5ece354ba57.js"
          integrity="sha512-QH5bJyfB8kHJXVPbJMd2vqcb/BjglRG4FdZprYyspunhilOGStNksczM&#43;i8pVnaNM8/hk7&#43;2TTQG87Xs41S6Vw=="
          data-oid="views_thoughts/dream/index.md"
          data-oid-likes="likes_thoughts/dream/index.md"></script>
      

    </section>
    <footer class="pt-8 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/thoughts/blog/">
              <span class="flex flex-col">
                <span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >博客搭建</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2024-08-17T17:26:56&#43;08:00">2024-08-17</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


      
        
          
        
      
    </footer>
  </article>

        <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a
    href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="返回顶部"
    title="返回顶部">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
      <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400">
        <ul class="flex flex-col list-none sm:flex-row">
          
            <li
              class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center"
                href="/tags/"
                title="标签">
                
                标签
              </a>
            </li>
          
            <li
              class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center"
                href=""
                title="">
                
                关于
              </a>
            </li>
          
        </ul>
      </nav>
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          <span class='inline-block'> Z的枯燥生活 © 2025 </span> <a href='https://beian.miit.gov.cn'>粤ICP备2024319385号-1</a></span>.
      </p>
    

    
    
      <p class="text-xs text-neutral-500 dark:text-neutral-400">
        
        
        由 <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a> 强力驱动
      </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script> 
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
    
<style>
  #music-player {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background-color: white;
    color: #333;
    padding: 4px;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    z-index: 9999;
    width: 50px;
    height: 50px;
    display: none;
    transition: all 0.3s ease;
    transform-origin: center;
  }
  
  #music-player.dark-mode {
    background-color: #333;
    color: #eee;
  }
  
  .player-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
  }
  
  .close-button {
    position: absolute;
    top: -8px;
    right: -8px;
    background-color: #fff;
    border: none;
    cursor: pointer;
    color: #666;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transition: all 0.2s ease;
    font-size: 10px;
    padding: 0;
    z-index: 10000;
  }
  
  .dark-mode .close-button {
    background-color: #333;
    color: #999;
  }
  
  .close-button:hover {
    background-color: #f0f0f0;
    color: #cc0000;
    transform: scale(1.1);
  }
  
  .dark-mode .close-button:hover {
    background-color: #444;
    color: #ff6666;
  }
  
  .control-button {
    background: none;
    border: none;
    cursor: pointer;
    color: #666;
    width: 42px;
    height: 42px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
  }
  
  .control-button:hover {
    color: #0066cc;
    transform: scale(1.1);
  }
  
  .dark-mode .control-button {
    color: #999;
  }
  
  .dark-mode .control-button:hover {
    color: #3399ff;
  }
  
  .now-playing-dot {
    position: absolute;
    right: -3px;
    bottom: -3px;
    width: 12px;
    height: 12px;
    background-color: #4CAF50;
    border-radius: 50%;
    box-shadow: 0 0 0 2px white;
    animation: pulse 1.5s infinite;
  }
  
  .dark-mode .now-playing-dot {
    box-shadow: 0 0 0 2px #333;
  }
  
  @keyframes pulse {
    0% {
      transform: scale(0.95);
      box-shadow: 0 0 0 0 rgba(76, 175, 80, 0.7);
    }
    
    70% {
      transform: scale(1);
      box-shadow: 0 0 0 5px rgba(76, 175, 80, 0);
    }
    
    100% {
      transform: scale(0.95);
      box-shadow: 0 0 0 0 rgba(76, 175, 80, 0);
    }
  }
  
   
  @keyframes fadeIn {
    from { opacity: 0; transform: scale(0.7); }
    to { opacity: 1; transform: scale(1); }
  }
  
  @keyframes fadeOut {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0; transform: scale(0.7); }
  }
  
  .fade-in {
    animation: fadeIn 0.3s forwards;
  }
  
  .fade-out {
    animation: fadeOut 0.3s forwards;
  }
  
  .play-music-button {
    background: none;
    border: none;
    cursor: pointer;
    color: #666;
    margin-left: 8px;
    padding: 4px;
    border-radius: 50%;
    transition: all 0.2s ease;
  }
  
  .play-music-button:hover {
    background-color: rgba(0,0,0,0.1);
    color: #0066cc;
    transform: scale(1.1);
  }
  
  .dark-mode .play-music-button,
  .dark .play-music-button {
    color: #999;
  }
  
  .dark-mode .play-music-button:hover,
  .dark .play-music-button:hover {
    background-color: rgba(255,255,255,0.1);
    color: #3399ff;
  }
  
   
  .play-music-button.playing svg path:last-child {
    d: path('M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z');
  }
  
   
  #audio-player {
    display: none;
  }
  
   
  @media (max-width: 768px) {
    #music-player {
      bottom: 15px;
      right: 15px;
      width: 45px;
      height: 45px;
    }
    
    .control-button {
      width: 38px;
      height: 38px;
    }
    
    .control-button svg {
      width: 24px;
      height: 24px;
    }
    
    .close-button {
      width: 18px;
      height: 18px;
      top: -6px;
      right: -6px;
    }
    
    .close-button svg {
      width: 10px;
      height: 10px;
    }
    
    .now-playing-dot {
      width: 10px;
      height: 10px;
    }
  }
  
  @media (max-width: 480px) {
    #music-player {
      bottom: 12px;
      right: 12px;
      width: 40px;
      height: 40px;
      padding: 3px;
    }
    
    .control-button {
      width: 34px;
      height: 34px;
    }
    
    .control-button svg {
      width: 22px;
      height: 22px;
    }
  }
</style>

<div id="music-player">
  <button id="close-player" class="close-button" title="关闭播放器">
    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
      <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
    </svg>
  </button>
  
  <div class="player-controls">
    <button id="play-pause" class="control-button" title="播放/暂停">
      <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
        <path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"/>
      </svg>
    </button>
  </div>
  
  <div class="now-playing-dot"></div>
  
  <audio id="audio-player">
    <source id="audio-source" src="/music/Toby Fox - Fallen Down (Reprise).mp3" type="audio/mpeg">
    您的浏览器不支持音频播放。
  </audio>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    
    function detectDarkMode() {
      if (document.documentElement.classList.contains('dark') || 
          window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.getElementById('music-player').classList.add('dark-mode');
      }
    }
    
    
    const defaultPlaylist = [
      { title: "Fallen Down (Reprise)", artist: "Toby Fox", src: "/music/Toby Fox - Fallen Down (Reprise).mp3" },
      { title: "Home", artist: "Disasterpeace", src: "/music/Disasterpeace - Home.mp3" },
      { title: "Time Passes", artist: "Kevin MacLeod", src: "/music/Kevin MacLeod - Time Passes.mp3" }
    ];
    
    
    let currentPlaylist = [...defaultPlaylist];
    
    
    let currentSongIndex = 0;
    
    
    let activeButton = null;
    
    
    let currentMusicFile = null;
    
    
    let activeCard = null;
    
    
    const musicPlayer = document.getElementById('music-player');
    const audioPlayer = document.getElementById('audio-player');
    const audioSource = document.getElementById('audio-source');
    const playPauseBtn = document.getElementById('play-pause');
    const closePlayerBtn = document.getElementById('close-player');
    
    
    function loadSong(index) {
      const song = currentPlaylist[index];
      
      playPauseBtn.setAttribute('title', `${song.title} - ${song.artist}`);
      audioSource.src = song.src;
      currentMusicFile = song.src.split('/').pop();
      audioPlayer.load();
    }
    
    
    playPauseBtn.addEventListener('click', function() {
      if (audioPlayer.paused) {
        audioPlayer.play();
        playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z"/></svg>';
        
        if (activeButton) {
          updateButtonState(activeButton, true);
        }
      } else {
        audioPlayer.pause();
        playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"/></svg>';
        
        if (activeButton) {
          updateButtonState(activeButton, false);
        }
      }
    });
    
    
    closePlayerBtn.addEventListener('click', function() {
      musicPlayer.classList.add('fade-out');
      
      
      setTimeout(function() {
        musicPlayer.style.display = 'none';
        musicPlayer.classList.remove('fade-out');
        
        audioPlayer.pause();
        
        if (activeButton) {
          updateButtonState(activeButton, false);
          activeButton = null;
        }
        
        if (activeCard) {
          updateButtonState(activeCard, false);
          activeCard = null;
        }
      }, 300);
    });
    
    
    audioPlayer.addEventListener('ended', function() {
      currentSongIndex = (currentSongIndex + 1) % currentPlaylist.length;
      loadSong(currentSongIndex);
      audioPlayer.play();
    });
    
    
    function updateButtonState(button, isPlaying) {
      if (button.classList.contains('play-music-button')) {
        
        if (isPlaying) {
          button.classList.add('playing');
          button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z"/></svg>';
        } else {
          button.classList.remove('playing');
          button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"/></svg>';
        }
      } else if (button.classList.contains('post-content')) {
        
        if (isPlaying) {
          button.classList.add('playing');
        } else {
          button.classList.remove('playing');
        }
      }
    }
    
    
    loadSong(currentSongIndex);
    
    
    detectDarkMode();
    
    
    const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.attributeName === 'class') {
          detectDarkMode();
        }
      });
    });
    
    observer.observe(document.documentElement, {
      attributes: true
    });
    
    
    window.togglePostMusic = function(button, title, artist, file) {
      
      const musicFile = file.replace(/^\/music\//, '');
      
      
      const isSameMusic = currentMusicFile === musicFile;
      
      
      const isPlaying = !audioPlayer.paused;
      
      
      if (activeButton && activeButton !== button) {
        updateButtonState(activeButton, false);
      }
      
      
      if (button.classList.contains('post-content')) {
        
        if (activeCard && activeCard !== button) {
          updateButtonState(activeCard, false);
        }
        activeCard = button;
      } else {
        
        activeButton = button;
      }
      
      
      musicPlayer.classList.remove('fade-in');
      if (musicPlayer.style.display === 'none' || !musicPlayer.style.display) {
        musicPlayer.style.display = 'flex';
        musicPlayer.classList.add('fade-in');
      }
      
      
      if (isSameMusic) {
        
        if (isPlaying) {
          
          audioPlayer.pause();
          playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M6.271 5.055a.5.5 0 0 1 .52.038l3.5 2.5a.5.5 0 0 1 0 .814l-3.5 2.5A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445z"/></svg>';
          
          if (activeCard) updateButtonState(activeCard, false);
          if (activeButton) updateButtonState(activeButton, false);
        } else {
          
          audioPlayer.play();
          playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z"/></svg>';
          
          if (activeCard) updateButtonState(activeCard, true);
          if (activeButton) updateButtonState(activeButton, true);
        }
      } else {
        
        currentPlaylist = [{ 
          title: title, 
          artist: artist, 
          src: '/music/' + file 
        }];
        currentSongIndex = 0;
        loadSong(0);
        audioPlayer.play();
        playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z"/></svg>';
        
        if (activeCard) updateButtonState(activeCard, true);
        if (activeButton) updateButtonState(activeButton, true);
      }
    };
    
    
    window.playPostMusic = function(title, artist, file) {
      musicPlayer.classList.remove('fade-in');
      
      if (musicPlayer.style.display === 'none' || !musicPlayer.style.display) {
        musicPlayer.style.display = 'flex';
        musicPlayer.classList.add('fade-in');
      }
      
      if (title && artist && file) {
        currentPlaylist = [{ 
          title: title, 
          artist: artist, 
          src: '/music/' + file 
        }];
        currentSongIndex = 0;
        loadSong(0);
        audioPlayer.play();
        playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z"/></svg>';
      } else {
        currentPlaylist = [...defaultPlaylist];
        currentSongIndex = 0;
        loadSong(0);
        audioPlayer.play();
        playPauseBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M5 6.25a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5zm3.5 0a1.25 1.25 0 1 1 2.5 0v3.5a1.25 1.25 0 1 1-2.5 0v-3.5z"/></svg>';
      }
    };
    
    
    document.addEventListener('keydown', function(e) {
      
      if (musicPlayer.style.display === 'flex') {
        
        if (e.code === 'Space' && e.target === document.body) {
          e.preventDefault(); 
          playPauseBtn.click();
        }
        
        else if (e.code === 'Escape') {
          closePlayerBtn.click();
        }
      }
    });
    
    
    audioPlayer.addEventListener('play', function() {
      if (activeButton) {
        updateButtonState(activeButton, true);
      }
      if (activeCard) {
        updateButtonState(activeCard, true);
      }
    });
    
    audioPlayer.addEventListener('pause', function() {
      if (activeButton) {
        updateButtonState(activeButton, false);
      }
      if (activeCard) {
        updateButtonState(activeCard, false);
      }
    });
  });
</script>  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-index-500"
  data-url="//localhost:1313/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          

  <span class="relative block icon">
    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>

  </span>


        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="搜索"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="关闭 (Esc)">
        

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>

  </span>


      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
